# Contributor: Tommy Buado <tommy@thinkpad.local>
# Maintainer: Tommy Buado <tommy@thinkpad.local>
pkgname=dwm
pkgver=6.5
pkgrel=0
pkgdesc="A dynamic window manager for X"
url="https://dwm.suckless.org"
arch="all"
license="MIT"
depends="dmenu-virtual st-virtual"
makedepends="libxft-dev libx11-dev libxinerama-dev"
subpackages="$pkgname-doc"
options="!check" # no test suite
source="https://dl.suckless.org/dwm/dwm-$pkgver.tar.gz dwm.desktop"

provides="dwm-virtual"
provider_priority=100

prepare() {
	default_prepare
	sed -i -e "/CFLAGS/{s/-Os//;s/=/+=/}" \
		-e "/LDFLAGS/{s/=/+=/}" config.mk
}

build() {
	make X11INC=/usr/include/X11 \
		X11LIB=/usr/lib/X11 \
		FREETYPEINC=/usr/include/freetype2
}

package() {
	make PREFIX=/usr DESTDIR="$pkgdir" install
	install -Dm644 "$srcdir"/dwm.desktop \
		-t "$pkgdir"/usr/share/xsessions/
}

sha512sums="
6cc3efd8d8a5e96517474fdcb1c1a6192fdf669c1bb02de6aea0a9f1a951360bf73c9576a5a0f06b00e2f839bacc304d60548d5ead0996bf46d82be4121ed248  dwm-6.5.tar.gz
8d8a3f3e2b285dfce17da9cf4173b4841d0d7465112a1b2478d417dfb9c0b37ae98542c710464fcf0fdbe8fcef5a502f88a88a115d5c1717cf429f84797337dd  dwm.desktop
"
